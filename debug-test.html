<!DOCTYPE html>
<html>
<head>
    <title>タイピングゲーム動作テスト</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 10px; border: 1px solid #ddd; }
        .pass { color: green; }
        .fail { color: red; }
    </style>
</head>
<body>
    <h1>タイピングゲーム動作テスト</h1>
    
    <div class="test-section">
        <h2>1. ゲームページアクセステスト</h2>
        <p><a href="http://localhost:3000/game" target="_blank">ゲームページを開く</a></p>
        <p>チェック項目:</p>
        <ul>
            <li>ページが正常に読み込まれる</li>
            <li>日本語の単語が表示される</li>
            <li>ひらがなが表示される</li>
            <li>ローマ字のタイピングエリアが表示される</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>2. キー入力テスト</h2>
        <p>ゲームページでキーを押した時の動作:</p>
        <ul>
            <li>文字が入力されると色が変わる</li>
            <li>正しいキーの場合、音が鳴る</li>
            <li>間違ったキーの場合、エラー音が鳴る</li>
            <li>単語が完成すると次の単語に進む</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>3. ブラウザコンソール確認</h2>
        <p>F12を押してデベロッパーツールを開き、Consoleタブでログを確認:</p>
        <ul>
            <li>🚀 [DEBUG] OptimizedTypingArea: 初期化開始</li>
            <li>🚀 [DEBUG] UltraFastTypingEngine: 初期化開始</li>
            <li>⌨️ [DEBUG] キー入力: (押したキー)</li>
        </ul>
    </div>    <script>
        console.log('🧪 [TEST] デバッグテストページ読み込み完了');
        
        // デバッグメッセージを受信して表示
        const logContainer = document.createElement('div');
        logContainer.id = 'debug-logs';
        logContainer.style.cssText = 'margin-top: 20px; padding: 10px; background: #f5f5f5; border: 1px solid #ddd; font-family: monospace; max-height: 300px; overflow-y: auto;';
        logContainer.innerHTML = '<h3>リアルタイムデバッグログ:</h3>';
        document.body.appendChild(logContainer);
        
        window.addEventListener('message', (event) => {
            if (event.data && (event.data.type === 'TYPING_DEBUG' || event.data.type === 'TYPING_ENGINE_DEBUG')) {
                const logEntry = document.createElement('div');
                logEntry.style.cssText = 'margin: 2px 0; padding: 2px; background: white;';
                logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${event.data.message} ${event.data.data ? JSON.stringify(event.data.data) : ''}`;
                logContainer.appendChild(logEntry);
                logContainer.scrollTop = logContainer.scrollHeight;
            }
        });
        
        // ゲームページのテスト用リンクを開いた時の確認
        function openGameAndListen() {
            const gameWindow = window.open('http://localhost:3000/game', '_blank');
            if (gameWindow) {
                setTimeout(() => {
                    console.log('ゲームページを開きました。デバッグメッセージを待機中...');
                }, 1000);
            }
        }
    </script>
</body>
</html>
